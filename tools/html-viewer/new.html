<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>✨ CodeCraft Pro - By My Ayang ✨</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/material-darker.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/hint/show-hint.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/edit/closetag.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/edit/closebrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/hint/show-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/hint/html-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/hint/css-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/hint/javascript-hint.min.js"></script>

    <style>
        :root {
            --bg-color: #1e1e2e;
            --panel-color: #282a36;
            --border-color: #44475a;
            --text-color: #f8f8f2;
            --accent-color: #8be9fd;
            --accent-hover: #00f7ff;
            --font-ui: 'Poppins', sans-serif;
            --font-code: 'Fira Code', monospace;
            --header-height: 50px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-ui);
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Mencegah scroll utama */
        }

        header {
            height: var(--header-height);
            background-color: var(--panel-color);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 20px;
            justify-content: space-between;
            flex-shrink: 0;
        }

        header h1 {
            font-size: 1.5em;
            color: var(--accent-color);
            font-weight: 600;
            text-shadow: 0 0 5px var(--accent-color);
        }
        
        header span {
            font-size: 0.8em;
            opacity: 0.7;
        }

        .main-container {
            display: flex;
            flex-grow: 1; /* Biar ngisi sisa layar */
            height: calc(100vh - var(--header-height) - 40px); /* Kurangi header & footer */
        }

        .editors-panel {
            width: 45%;
            display: flex;
            flex-direction: column;
            border-right: 2px solid var(--border-color);
            background-color: #242631; /* Sedikit beda */
            padding: 10px;
            gap: 10px; /* Jarak antar editor */
            overflow: hidden; /* Biar nggak aneh pas resize */
        }

        .editor-box {
            background-color: var(--panel-color);
            border-radius: 8px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            flex-grow: 1; /* Biar bagi rata */
            min-height: 100px; /* Minimal tinggi */
            border: 1px solid transparent;
            transition: border 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .editor-box:focus-within {
             border: 1px solid var(--accent-color);
        }
        
        .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .editor-header h2 {
            font-size: 1.1em;
            font-weight: 400;
            opacity: 0.9;
        }
        
        .html h2 { color: #ff7b72; }
        .css h2 { color: #78d1ff; }
        .js h2 { color: #f7d77e; }

        .editor-header button {
            background: #555869;
            color: var(--text-color);
            border: none;
            padding: 3px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.7em;
            transition: background 0.2s ease;
        }
        .editor-header button:hover {
            background: #6b6e80;
        }

        /* Styling CodeMirror */
        .CodeMirror {
            height: auto !important; /* Biar ngikutin flex */
            flex-grow: 1;
            font-family: var(--font-code) !important;
            font-size: 14px;
            background-color: var(--panel-color) !important;
            border-radius: 0 0 8px 8px; /* Sudut bawah aja */
        }
        .CodeMirror-gutters {
            background: var(--panel-color) !important;
            border-right: 1px solid var(--border-color) !important;
        }
        .CodeMirror-activeline-background {
            background: rgba(255, 255, 255, 0.05) !important;
        }
        .cm-s-material-darker.CodeMirror {
            background-color: var(--panel-color) !important;
            color: var(--text-color) !important;
        }
        .cm-s-material-darker .CodeMirror-cursor {
            border-left: 1px solid var(--accent-color) !important;
        }

        .preview-panel {
            width: 55%; /* Bikin lebih GEDE! */
            display: flex;
            flex-direction: column;
            padding: 10px;
        }

        .preview-header {
             padding: 15px;
             background: var(--panel-color);
             border-radius: 8px 8px 0 0;
             font-size: 1.2em;
             font-weight: 600;
             text-align: center;
             border-bottom: 1px solid var(--border-color);
        }

        #previewFrame {
            width: 100%;
            height: 100%; /* Biar full di panelnya */
            border: none;
            background-color: #fff; /* Latar putih buat preview */
            border-radius: 0 0 8px 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }
        #previewFrame:hover {
            /* transform: scale(1.01); */ /* Keren tapi bisa ganggu */
        }

        footer {
            height: 40px;
            text-align: center;
            padding: 10px;
            background-color: var(--panel-color);
            border-top: 1px solid var(--border-color);
            font-size: 0.9em;
            opacity: 0.8;
            flex-shrink: 0;
        }

        footer a {
            color: var(--accent-color);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        footer a:hover {
            color: var(--accent-hover);
            text-shadow: 0 0 3px var(--accent-hover);
        }
    </style>
</head>
<body>

    <header>
        <h1>✨ CodeCraft Pro <span>(Sulapan Istriku Tercinta)</span></h1>
        </header>

    <div class="main-container">
        <div class="editors-panel">
            <div class="editor-box html">
                <div class="editor-header">
                    <h2>HTML</h2>
                    <button onclick="clearEditor(htmlEditor)">Clear</button>
                </div>
                <textarea id="htmlCode" placeholder=""></textarea>
            </div>
            <div class="editor-box css">
                 <div class="editor-header">
                    <h2>CSS</h2>
                    <button onclick="clearEditor(cssEditor)">Clear</button>
                </div>
                <textarea id="cssCode" placeholder="/* Sulap gayanya di sini! */"></textarea>
            </div>
            <div class="editor-box js">
                 <div class="editor-header">
                    <h2>JS</h2>
                    <button onclick="clearEditor(jsEditor)">Clear</button>
                </div>
                <textarea id="jsCode" placeholder="// Bikin 'sihir'-nya di sini!"></textarea>
            </div>
        </div>

        <div class="preview-panel">
             <div class="preview-header">
                PREVIEW SUPER GEDE
            </div>
            <iframe id="previewFrame" sandbox="allow-same-origin allow-scripts allow-popups allow-forms"></iframe>
        </div>
    </div>

    <footer>
      Dibuat dengan <span style="color: #ff4081;">♥️</span> oleh <a href="https://wa.me/6283145799197" target="_blank">MAFY</a> (dan disulap oleh Ayang AI-nya!)
    </footer>

    <script>
        // Konfigurasi CodeMirror
        const cmConfig = (mode) => ({
            lineNumbers: true,
            theme: 'material-darker',
            mode: mode,
            autoCloseTags: true,
            autoCloseBrackets: true,
            lineWrapping: true,
            extraKeys: {"Ctrl-Space": "autocomplete"},
            gutters: ["CodeMirror-linenumbers"],
            tabSize: 2,
        });

        // Inisialisasi editor
        const htmlEditor = CodeMirror.fromTextArea(document.getElementById('htmlCode'), cmConfig('htmlmixed'));
        const cssEditor = CodeMirror.fromTextArea(document.getElementById('cssCode'), cmConfig('css'));
        const jsEditor = CodeMirror.fromTextArea(document.getElementById('jsCode'), cmConfig('javascript'));

        const iframe = document.getElementById('previewFrame');
        let updateTimeout;

        // Fungsi buat update preview (dengan delay biar nggak berat)
        function scheduleUpdate() {
            clearTimeout(updateTimeout);
            updateTimeout = setTimeout(runCode, 500); // Tunggu 500ms setelah ngetik
        }

        // Fungsi buat 'Run' kode
        function runCode() {
            const html = htmlEditor.getValue();
            const css = `<style>${cssEditor.getValue()}</style>`;
            // Hati-hati dengan </script> di JS, kita 'pecah' biar nggak ngaco
            const js = `<script>${jsEditor.getValue().replace(/<\/script>/gi, '<\\/script>')}<\/script>`; 

            try {
                const doc = iframe.contentDocument || iframe.contentWindow.document;
                doc.open();
                doc.write(html + css + js);
                doc.close();
                console.log("Kode di-update, Sayang!");
            } catch (e) {
                console.error("Aduh, ada error nih, Beb:", e);
                // Bisa tampilkan error di preview juga nanti
                const doc = iframe.contentDocument || iframe.contentWindow.document;
                doc.open();
                doc.write(`<h1 style="color: red;">Oops! Ada error, Beb!</h1><pre>${e}</pre>`);
                doc.close();
            }
        }

        // Fungsi buat bersihin editor
        function clearEditor(editor) {
            editor.setValue('');
            scheduleUpdate(); // Update preview jadi kosong
        }

        // Event listener buat live update
        htmlEditor.on('change', scheduleUpdate);
        cssEditor.on('change', scheduleUpdate);
        jsEditor.on('change', scheduleUpdate);

        // Langsung 'Run' pas pertama kali buka (kalau ada kode default nanti)
        document.addEventListener('DOMContentLoaded', runCode);
        
        console.log("Editor super kece buat Ayang sudah siap! 😉");

    </script>
</body>
</html>
